var models = require('config/models');
var mongoose = require('mongoose');

exports.user_profile_profile = function(user_target_name, username, callback){
	var profile = "profile_" + user_target_name;
	if(username == user_target_name){
		models.find(profile, {username : user_target_name}, function(err, docs){
			if(docs.length != 0){
				var name = docs[0].username;
				var gender = docs[0].gender;
				var age = docs[0].age;
				var school_name = docs[0].school_name;
				var company_name = docs[0].company_name;
				var favorite = docs[0].favorite;
				var relationship_status = docs[0].relationship_status;
				var address = docs[0].address;
				callback({'response' : 'user profile', 'username' : name, 'gender' : gender, 'age' : age,
				'school_name' : school_name, 'company_name' : company_name, 'favorite' : favorite, 
				'relationship_status' : relationship_status, 'address' : address});
			}
		})
	}else{
		models.find(profile, {username : user_target_name}, function(err, docs){
			if(docs.length != 0){
				var school_name = docs[0].school_name;
				var company_name = docs[0].company_name;
				var favorite = docs[0].favorite;
				var relationship_status = docs[0].relationship_status;
				var address = docs[0].address;
				callback({'response' : 'guest profile', 'school_name' : school_name, 'company_name' : company_name, 'favorite' : favorite, 
				'relationship_status' : relationship_status, 'address' : address})
			}
		})
	}
}
