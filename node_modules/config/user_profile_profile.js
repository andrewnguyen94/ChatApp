var models = require('config/models');

exports.user_profile_profile = function(user_target_name, username, callback){
	var profile = models["profile_" + user_target_name];
	if(username == user_target_name){
		profile.find({username : user_target_name}, function(err, users){
			if(users.length != 0){
				var name = users[0].username;
				var gender = users[0].gender;
				var age = users[0].age;
				var school_name = users[0].school_name;
				var company_name = users[0].company_name;
				var favorite = users[0].favorite;
				var relationship_status = users[0].relationship_status;
				var address = users[0].address;
				callback({'response' : 'user profile', 'username' : name, 'gender' : gender, 'age' : age,
				'school_name' : school_name, 'company_name' : company_name, 'favorite' : favorite, 
				'relationship_status' : relationship_status, 'address' : address});
			}
		})
	}else{
		profile.find({username : user_target_name}, function(err, users){
			if(users.length != 0){
				var school_name = users[0].school_name;
				var company_name = users[0].company_name;
				var favorite = users[0].favorite;
				var relationship_status = users[0].relationship_status;
				var address = users[0].address;
				callback({'response' : 'guest profile', 'school_name' : school_name, 'company_name' : company_name, 'favorite' : favorite, 
				'relationship_status' : relationship_status, 'address' : address})
			}
		})
	}
}